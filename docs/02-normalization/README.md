# ì •ê·œí™” (Normalization)

---

-   ì •ê·œí™”ëŠ” ë°ì´í„° ì¤‘ë³µì„ ì œê±°í•˜ê³  ì´ìƒ(Anomaly)ì„ ë°©ì§€í•˜ì—¬ ë°ì´í„° ë¬´ê²°ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ ë¹„ìš©ì„ ì¤„ì´ëŠ” ì„¤ê³„ ê¸°ë²•ì´ë‹¤.
-   ëª©í‘œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
    -   ì—…ë°ì´íŠ¸ ì´ìƒ(Update Anomaly) ë°©ì§€: ë™ì¼ ì •ë³´ê°€ ì—¬ëŸ¬ ê³³ì— ì¤‘ë³µë˜ì–´ ìƒê¸°ëŠ” ë¶ˆì¼ì¹˜ ì œê±°
    -   ì‚½ì… ì´ìƒ(Insert Anomaly) ë°©ì§€: ì¼ë¶€ ì •ë³´ë§Œìœ¼ë¡œëŠ” ë ˆì½”ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œ ì œê±°
    -   ì‚­ì œ ì´ìƒ(Delete Anomaly) ë°©ì§€: ë¶ˆí•„ìš”í•œ ë¶€ìˆ˜ ë°ì´í„° ì‚­ì œë¡œ ì¸í•´ í•„ìš”í•œ ì •ë³´ê¹Œì§€ ìœ ì‹¤ë˜ëŠ” ë¬¸ì œ ì œê±°

> -   ì •ê·œí™”ëŠ” "í•¨ìˆ˜ì  ì¢…ì†(Functional Dependency)"ì„ ì‹ë³„í•˜ê³ , ê·¸ì— ë§ì¶”ì–´ í…Œì´ë¸”ì„ ë¶„í•´í•˜ëŠ” ì‘ì—…ì´ë‹¤.
> -   ë¶„í•´ëŠ” ì •ë³´ ì†ì‹¤ ì—†ì´(ë¬´ì†ì‹¤ ë¶„í•´) ë˜ë©°, ê°€ëŠ¥í•œ í•œ ì˜ì¡´ì„±ì„ ë³´ì¡´í•œë‹¤.
> -   ì‹¤ë¬´ì—ì„œëŠ” 3NF ë˜ëŠ” BCNFë¥¼ ëª©í‘œë¡œ í•˜ë˜, ì¿¼ë¦¬/ì„±ëŠ¥ ìš”êµ¬ì— ë§ì¶° ë¶€ë¶„ ë¹„ì •ê·œí™”ë¥¼ ì„ íƒì ìœ¼ë¡œ ì ìš©í•œë‹¤.

#### ìš©ì–´ ì •ë¦¬

-   í•¨ìˆ˜ì  ì¢…ì†(Functional Dependency, FD): X â†’ YëŠ” ì†ì„± ì§‘í•© Xê°€ ì£¼ì–´ì§€ë©´ Yê°€ ìœ ì¼í•˜ê²Œ ê²°ì •ë¨ì„ ëœ»í•œë‹¤.
-   í›„ë³´í‚¤(Candidate Key): ë ˆì½”ë“œë¥¼ ìœ ì¼í•˜ê²Œ ì‹ë³„í•˜ëŠ” ìµœì†Œ ì†ì„± ì§‘í•©. ì—¬ëŸ¬ ê°œ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤.
-   ê¸°ë³¸í‚¤(Primary Key): í›„ë³´í‚¤ ì¤‘ ì„ íƒëœ ëŒ€í‘œ í‚¤.

---

## ì‹œë‚˜ë¦¬ì˜¤

#### Table

`account`
| bank_name | account_num | account_id | class | ratio | empl_id | empl_name | card_id |
| --------- | ----------- | ---------- | ------ | ----- | ------- | --------- | ---------- |
| woori | 110-23-01 | 10001 | bronze | 0.1 | e1 | park | c101 |
| woori | 110-34-33 | 10002 | silver | 0.2 | e1 | park | c102 |
| kookmin | 1989-33-12 | 10003 | loyal | 0.7 | e1 | park | c103 |
| kookmin | 1989-32-23 | 10004 | loyal | 0.1 | e2 | kim | c201, c202 |

#### Candidate Key

-   `{account_id}`
-   `{bank_name, account_num}`

---

### 1NF

-   ì†ì„± í•˜ë‚˜ëŠ” í•˜ë‚˜ì˜ ì†ì„±ê°’ë§Œì„ ê°€ì ¸ì•¼ í•œë‹¤ (**ë„ë©”ì¸ ì›ìê°’**)

`account`
| bank_name | account_num | account_id | class | ratio | empl_id | empl_name | card_id |
| --------- | ----------- | ---------- | ------ | ----- | ------- | --------- | ------- |
| woori | 110-23-01 | 10001 | bronze | 0.1 | e1 | park | c101 |
| woori | 110-34-33 | 10002 | silver | 0.2 | e1 | park | c102 |
| kookmin | 1989-33-12 | 10003 | loyal | 0.7 | e1 | park | c103 |
| kookmin | 1989-32-23 | 10004 | loyal | 0.1 | e2 | kim | c201 |
| kookmin | 1989-32-23 | 10004 | loyal | 0.1 | e2 | kim | c202 |

> âš ï¸ **ë¶€ë¶„ ì¢…ì† ìœ„ë°°**

### 2NF

-   ê¸°ë³¸í‚¤ ì¼ë¶€ì—ë§Œ ì¢…ì†ëœ ì†ì„±ì„ ì œê±°í•œë‹¤ (**ë¶€ë¶„ ì¢…ì†**)

> **ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸**
>
> **2NFëŠ” keyê°€ compositive key(ë³µí•©í‚¤)ê°€ ì•„ë‹ˆë¼ë©´ 2NFëŠ” ìë™ìœ¼ë¡œ ë§Œì¡±í•œë‹¤**

`account`
| account_id(pk) | bank_name | account_num | class | ratio | empl_id | empl_name |
| ----------- | ---------- | ------------ | ------ | ----- | -------- | ---------- |
| 10001 | woori | 110-23-01 | bronze | 0.1 | e1 | park |
| 10002 | woori | 110-34-33 | silver | 0.2 | e1 | park |
| 10003 | kookmin | 1989-33-12 | loyal | 0.7 | e1 | park |
| 10004 | kookmin | 1989-32-23 | loyal | 0.1 | e2 | kim |

`account_card`
| account_id | card_id(pk) |
| ----------- | -------- |
| 10001 | c101 |
| 10002 | c102 |
| 10003 | c103 |
| 10004 | c201 |
| 10004 | c202 |

> âš ï¸ **ì´í–‰ ì¢…ì† ìœ„ë°°**
>
> if xâ†’y & yâ†’z holds, then xâ†’z is transitive FD
> unless either y or z is not subset of any key

> { account_id â†’ empl_id }, {empl_id â†’ empl_name}
> **account_id â†’ empl_id â†’ empl_name**

### 3NF

-   ê¸°ë³¸í‚¤ê°€ ì•„ë‹Œ ì†ì„± ê°„ì˜ ì´í–‰ ì¢…ì†ì„ ì œê±°í•œë‹¤ (**ì´í–‰ ì¢…ì†**)

`account`
| account_id(pk) | bank_name | account_num | class | ratio | empl_id |
| ----------- | ---------- | ------------ | ------ | ----- | -------- |
| 10001 | woori | 110-23-01 | bronze | 0.1 | e1 |
| 10002 | woori | 110-34-33 | silver | 0.2 | e1 |
| 10003 | kookmin | 1989-33-12 | loyal | 0.7 | e1 |
| 10004 | kookmin | 1989-32-23 | loyal | 0.1 | e2 |

`employee`
| empl_id(pk) | empl_name |
| -------- | ---------- |
| e1 | park |
| e2 | kim |

`account_card`
| account_id | card_id(pk) |
| ----------- | -------- |
| 10001 | c101 |
| 10002 | c102 |
| 10003 | c103 |
| 10004 | c201 |
| 10004 | c202 |

> âš ï¸ **ê²°ì •ì ìœ„ë°°**
>
> ëª¨ë“  ìœ íš¨í•œ non-trivial FD xâ†’yëŠ” xê°€ super key ì—¬ì•¼ í•œë‹¤

> {class â†’ bank_name}
> **classëŠ” super key ì—¬ì•¼ í•œë‹¤**

### BCNF

-   ëª¨ë“  ê²°ì •ìê°€ í›„ë³´í‚¤ì—¬ì•¼ í•œë‹¤ (**ê²°ì •ì**)

`account`
| account_id(pk) | account_num | class | ratio | empl_id |
| ----------- | ------------ | ------ | ----- | -------- |
| 10001 | 110-23-01 | bronze | 0.1 | e1 |
| 10002 | 110-34-33 | silver | 0.2 | e1 |
| 10003 | 1989-33-12 | loyal | 0.7 | e1 |
| 10004 | 1989-32-23 | loyal | 0.1 | e2 |

`account_class`
|class(pk)|bank_name|
|--|--|
|bronze|woori|
|silver|woori|
|prestige|kookmin|
|loyal|kookmin|

`employee`
| empl_id(pk) | empl_name |
| -------- | ---------- |
| e1 | park |
| e2 | kim |

`account_card`
| account_id | card_id(pk) |
| ----------- | -------- |
| 10001 | c101 |
| 10002 | c102 |
| 10003 | c103 |
| 10004 | c201 |
| 10004 | c202 |

### 4NF

-   ë‹¤ì¹˜ ì¢…ì†ì„ ì œê±°í•œë‹¤ (**ë‹¤ì¹˜ ì¢…ì†**)

### 5NF

-   ì¡°ì¸ ì‹œ ë°ì´í„° ì†ì‹¤ì´ ì—†ê²Œ í•œë‹¤ (**ì¡°ì¸ ì¢…ì†**)
